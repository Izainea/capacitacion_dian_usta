<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso SQL Avanzado: Diseño y Arquitectura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        section { display: none; animation: fadeIn 0.5s; }
        section.active { display: block; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: scale(0.98); } 
            to { opacity: 1; transform: scale(1); } 
        }
        .diagram-container { min-height: 300px; }
        .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4">

    <main class="w-full max-w-6xl mx-auto">
        <!-- Slide 1: Título Principal -->
        <section>
            <div class="bg-gray-800 p-12 rounded-2xl shadow-2xl text-center border-t-4 border-cyan-400">
                <h1 class="text-5xl font-black text-cyan-300 mb-4 tracking-tight">Diseño y Arquitectura de Datos</h1>
                <p class="text-2xl text-gray-300"><b>Un Curso Avanzado de SQL y Modelado Moderno</b></p>
            </div>
        </section>

        <!-- Slide 2: El Corazón de tus Aplicaciones -->
        <section>
            <div class="bg-gray-800 p-12 rounded-2xl shadow-2xl border-t-4 border-cyan-400">
                <h2 class="text-4xl font-bold text-cyan-300 mb-6 text-center">El Corazón de tus Aplicaciones</h2>
                <p class="text-xl text-gray-300 leading-relaxed">Toda gran aplicación se apoya en una base de datos. Es el motor silencioso que guarda, protege y sirve la información.<br><br>Un motor <b class="text-red-400">mal diseñado</b> genera fricción: lentitud y errores. Un motor <b class="text-green-400">bien diseñado</b> es sinónimo de eficiencia y confianza.</p>
            </div>
        </section>

        <!-- Slide 3: Nuestro Laboratorio: Databricks -->
        <section>
            <div class="bg-gray-800 p-8 rounded-2xl shadow-2xl border-t-4 border-cyan-400">
                <h2 class="text-3xl font-bold text-cyan-300 mb-6">Nuestro Laboratorio: ¿Por Qué Databricks?</h2>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <p class="text-lg text-gray-300 mb-4">Para explorar todas estas arquitecturas, necesitamos un entorno de trabajo versátil. Usaremos <b>Databricks</b> porque es una <b>plataforma unificada</b> que nos permite:</p>
                        <ul class="list-disc list-inside space-y-2 text-lg text-gray-400">
                            <li>Simular un <b>Data Lake</b> sobre almacenamiento en la nube.</li>
                            <li>Construir un <b>Lakehouse</b> usando su motor Delta Lake.</li>
                            <li>Utilizar <b>Spark SQL y PySpark</b> para crear y transformar cualquier modelo de datos.</li>
                            <li>Trabajar de forma colaborativa en un único entorno para ingeniería, ciencia de datos y análisis.</li>
                        </ul>
                    </div>
                    <div id="diagram-databricks" class="bg-gray-900 p-4 rounded-lg flex justify-center items-center diagram-container"></div>
                </div>
            </div>
        </section>

        <!-- Slide 4: Agenda del Curso -->
        <section>
            <div class="bg-gray-800 p-12 rounded-2xl shadow-2xl border-t-4 border-cyan-400">
                <h2 class="text-4xl font-bold text-cyan-300 mb-10 text-center">Agenda del Curso</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-left">
                    <a href="arquitecturas.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-indigo-500 lg:col-span-3">
                        <h2 class="text-2xl text-indigo-300"><b>1. Arquitecturas de Datos</b></h2>
                        <p class="text-gray-400 mt-2">Un panorama de los modelos de diseño: SQL, NoSQL y el Lakehouse.</p>
                    </a>
                    <a href="normalizacion.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-emerald-500">
                        <h2 class="text-2xl text-emerald-300"><b>2. Normalización</b></h2>
                        <p class="text-gray-400 mt-2">La base del diseño transaccional (OLTP).</p>
                    </a>
                    <a href="llaves.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-yellow-500">
                        <h2 class="text-2xl text-yellow-300"><b>3. Llaves</b></h2>
                        <p class="text-gray-400 mt-2">Garantizando la integridad y las relaciones.</p>
                    </a>
                    <a href="indices.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-purple-500">
                        <h2 class="text-2xl text-purple-300"><b>4. Índices</b></h2>
                        <p class="text-gray-400 mt-2">El secreto para que tus consultas vuelen.</p>
                    </a>
                    <a href="diagramas_erd.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-pink-500">
                        <h2 class="text-2xl text-pink-300"><b>5. Diagramas ERD</b></h2>
                        <p class="text-gray-400 mt-2">Visualizando la estructura de datos.</p>
                    </a>
                </div>
            </div>
        </section>
    </main>
    
    <div class="fixed bottom-8 flex space-x-4 z-10">
        <button id="prevBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
        <button id="nextBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">Siguiente</button>
    </div>
    
    <script>
        function drawForceDirectedGraph(containerId, nodes, links, width = 450, height = 300) {
            d3.select(containerId).select("svg").remove();
            const svg = d3.select(containerId).append("svg").attr("width", "100%").attr("height", "100%").attr("viewBox", `0 0 ${width} ${height}`);
            const simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.id).distance(d => d.distance || 120))
                .force("charge", d3.forceManyBody().strength(-300))
                .force("center", d3.forceCenter(width / 2, height / 2));
            
            const link = svg.append("g").selectAll("line").data(links).join("line")
                .attr("stroke", "#9ca3af").attr("stroke-opacity", 0.8).attr("stroke-width", 2);

            const node = svg.append("g").selectAll("g").data(nodes).join("g");
            node.append("rect").attr("width", d => d.width || 120).attr("height", d => d.height || 60)
                .attr("x", d => -(d.width || 120) / 2).attr("y", d => -(d.height || 60) / 2)
                .attr("rx", 10).attr("ry", 10)
                .attr("fill", d => d.color || "#0e7490");
            
            node.append("text").attr("text-anchor", "middle").attr("dy", "0.3em")
                .attr("fill", "white").style("font-size", "14px").style("font-weight", "bold").text(d => d.id);
            
            simulation.on("tick", () => {
                link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y);
                node.attr("transform", d => `translate(${d.x},${d.y})`);
            });
        }

        const databricksNodes = [
            { id: "Databricks", color: "#0891b2", width: 140, height: 70 },
            { id: "Data Engineering", color: "#059669" },
            { id: "Data Science / ML", color: "#059669" },
            { id: "BI / Analytics", color: "#059669" },
            { id: "Cloud Storage", color: "#64748b", width: 140 }
        ];
        const databricksLinks = [
            { source: "Databricks", target: "Data Engineering" },
            { source: "Databricks", target: "Data Science / ML" },
            { source: "Databricks", target: "BI / Analytics" },
            { source: "Cloud Storage", target: "Databricks" }
        ];

        const slides = document.querySelectorAll('main > section'); 
        let currentSlide = 0;
        const prevBtn = document.getElementById('prevBtn'); 
        const nextBtn = document.getElementById('nextBtn');
        
        function drawVisibleDiagram() {
            const activeSlide = slides[currentSlide];
            if (!activeSlide) return;
            const container = activeSlide.querySelector('.diagram-container');
            if (!container) return;
            d3.select(container).select("svg").remove();
            const containerId = `#${container.id}`;

            if (container.id === 'diagram-databricks') {
                drawForceDirectedGraph(containerId, databricksNodes, databricksLinks);
            }
        }

        function showSlide(index) { 
            slides.forEach((slide, i) => slide.classList.toggle('active', i === index)); 
            prevBtn.disabled = index === 0;
            prevBtn.classList.toggle('opacity-50', index === 0);
            nextBtn.disabled = index === slides.length - 1;
            nextBtn.classList.toggle('opacity-50', index === slides.length - 1);
            drawVisibleDiagram();
        }
        
        prevBtn.addEventListener('click', () => { if (currentSlide > 0) { currentSlide--; showSlide(currentSlide); } });
        nextBtn.addEventListener('click', () => { if (currentSlide < slides.length - 1) { currentSlide++; showSlide(currentSlide); } });
        document.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight') nextBtn.click(); else if (e.key === 'ArrowLeft') prevBtn.click(); });
        
        showSlide(currentSlide);
    </script>
</body>
</html>

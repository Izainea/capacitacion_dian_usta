<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 1: Dise√±o Relacional y Arquitectura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        section { display: none; animation: fadeIn 0.5s; }
        section.active { display: block; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: scale(0.98); } 
            to { opacity: 1; transform: scale(1); } 
        }
        .diagram-container { min-height: 400px; width: 100%; }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4">
    
    <main class="w-full max-w-6xl mx-auto">
        <!-- Slide 1: T√≠tulo -->
        <section>
            <div class="bg-gray-800 p-12 rounded-2xl shadow-xl text-center border-t-8 border-cyan-500">
                <h2 class="text-5xl font-black text-white mb-4 tracking-tight">Dise√±o Relacional y Arquitectura</h2>
                <p class="text-2xl text-gray-300"><b>M√≥dulo 1: Sentando las Bases del Pensamiento Cr√≠tico</b></p>
            </div>
        </section>

        <!-- Slide 2: ¬øPor d√≥nde empezamos? -->
        <section>
            <div class="bg-gray-800 p-10 rounded-2xl shadow-xl border-t-8 border-cyan-500">
                <h2 class="text-4xl font-bold text-white mb-6 text-center">La Gran Pregunta: ¬øPor D√≥nde Empezamos?</h2>
                <div class="grid md:grid-cols-2 gap-8 items-center text-lg">
                    <div class="bg-red-900/50 p-6 rounded-lg border border-red-500">
                        <h3 class="text-2xl font-bold text-red-400 mb-3">El Enfoque Tradicional (Fragmentado)</h3>
                        <p class="text-gray-300">Muchos cursos ense√±an los temas como islas separadas: aprendes `SELECT`, luego `JOIN`, mucho despu√©s quiz√°s algo de normalizaci√≥n, y la arquitectura se ve como un tema de "expertos".</p>
                        <p class="mt-3 text-gray-400"><b>El problema:</b> Es como aprender las piezas de un motor sin haber visto nunca un coche completo. No entiendes c√≥mo encajan ni por qu√© existen.</p>
                    </div>
                    <div class="bg-green-900/50 p-6 rounded-lg border border-green-500">
                        <h3 class="text-2xl font-bold text-green-400 mb-3">Nuestra Filosof√≠a (Integrada)</h3>
                        <p class="text-gray-300">Nosotros empezamos por el final: con la <b>visi√≥n del arquitecto</b>. Primero entendemos el "mapa" completo de las soluciones de datos para despu√©s dominar las herramientas necesarias para construir cada camino.</p>
                        <p class="mt-3 text-gray-400"><b>La ventaja:</b> Cada concepto que aprendas tendr√° un prop√≥sito claro dentro de un panorama m√°s amplio.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Slide 3: El Continuo del Dise√±o de Datos -->
        <section>
            <div class="bg-gray-800 p-10 rounded-2xl shadow-xl border-t-8 border-cyan-500">
                <h2 class="text-4xl font-bold text-white mb-2 text-center">El Continuo del Dise√±o de Datos</h2>
                <p class="text-lg text-gray-400 text-center mb-8">Estos no son temas separados. Son fases de un mismo proceso.</p>
                <div id="diagram-continuum" class="diagram-container"></div>
            </div>
        </section>

        <!-- Slide 4: El Panorama Arquitect√≥nico -->
        <section>
            <div class="bg-gray-800 p-10 rounded-2xl shadow-xl border-t-8 border-cyan-500">
                <h2 class="text-4xl font-bold text-white mb-2 text-center">Un Vistazo al Panorama Arquitect√≥nico</h2>
                <p class="text-lg text-gray-400 text-center mb-8">Cada arquitectura es un "patr√≥n de soluci√≥n" dise√±ado para un tipo de problema espec√≠fico.</p>
                <div id="diagram-architectures" class="diagram-container"></div>
            </div>
        </section>

        <!-- Slide 5: Los Bloques de Construcci√≥n -->
        <section>
            <div class="bg-gray-800 p-10 rounded-2xl shadow-xl border-t-8 border-cyan-500">
                <h2 class="text-4xl font-bold text-white mb-6 text-center">Los Bloques de Construcci√≥n Fundamentales</h2>
                <div class="grid md:grid-cols-3 gap-8 items-start text-center">
                    <div class="flex flex-col items-center">
                        <div class="text-4xl mb-4">üèõÔ∏è</div>
                        <h3 class="text-2xl font-bold text-gray-200 mb-2">Normalizaci√≥n</h3>
                        <p class="text-gray-400">La t√©cnica para organizar los datos en sistemas transaccionales, eliminando la redundancia y garantizando la integridad. Es el ADN de un buen dise√±o relacional.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="text-4xl mb-4">üîë</div>
                        <h3 class="text-2xl font-bold text-gray-200 mb-2">Llaves</h3>
                        <p class="text-gray-400">Son las "direcciones" y "conexiones" de nuestros datos. Definen la unicidad y las relaciones, permitiendo que los JOINS funcionen de manera fiable.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="text-4xl mb-4">üó∫Ô∏è</div>
                        <h3 class="text-2xl font-bold text-gray-200 mb-2">Diagramas ERD</h3>
                        <p class="text-gray-400">Son los planos. El lenguaje visual que usamos para dise√±ar, discutir y entender la estructura de la base de datos antes de construirla.</p>
                    </div>
                </div>
                <p class="text-center text-cyan-400 font-bold mt-10 text-xl">Dominar estos tres pilares nos permite construir CUALQUIERA de las arquitecturas que vimos de forma correcta y eficiente.</p>
            </div>
        </section>
        <!-- Slide 3: Nuestro Laboratorio: Databricks -->
        <section>
            <div class="bg-gray-800 p-8 rounded-2xl shadow-2xl border-t-4 border-cyan-400">
                <h2 class="text-3xl font-bold text-cyan-300 mb-6">Nuestro Laboratorio: ¬øPor Qu√© Databricks?</h2>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <p class="text-lg text-gray-300 mb-4">Para explorar todas estas arquitecturas, necesitamos un entorno de trabajo vers√°til. Usaremos <b>Databricks</b> porque es una <b>plataforma unificada</b> que nos permite:</p>
                        <ul class="list-disc list-inside space-y-2 text-lg text-gray-400">
                            <li>Simular un <b>Data Lake</b> sobre almacenamiento en la nube.</li>
                            <li>Construir un <b>Lakehouse</b> usando su motor Delta Lake.</li>
                            <li>Utilizar <b>Spark SQL y PySpark</b> para crear y transformar cualquier modelo de datos.</li>
                            <li>Trabajar de forma colaborativa en un √∫nico entorno para ingenier√≠a, ciencia de datos y an√°lisis.</li>
                        </ul>
                    </div>
                    <div id="diagram-databricks" class="bg-gray-900 p-4 rounded-lg flex justify-center items-center diagram-container"></div>
                </div>
            </div>
        </section>

        <!-- Slide 4: Agenda del Curso -->
        <section>
            <div class="bg-gray-800 p-12 rounded-2xl shadow-2xl border-t-4 border-cyan-400">
                <h2 class="text-4xl font-bold text-cyan-300 mb-10 text-center">Agenda del Curso</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-left">
                    <a href="arquitecturas.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-indigo-500 lg:col-span-3">
                        <h2 class="text-2xl text-indigo-300"><b>1. Arquitecturas de Datos</b></h2>
                        <p class="text-gray-400 mt-2">Un panorama de los modelos de dise√±o: SQL, NoSQL y el Lakehouse.</p>
                    </a>
                    <a href="normalizacion.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-emerald-500">
                        <h2 class="text-2xl text-emerald-300"><b>2. Normalizaci√≥n</b></h2>
                        <p class="text-gray-400 mt-2">La base del dise√±o transaccional (OLTP).</p>
                    </a>
                    <a href="llaves.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-yellow-500">
                        <h2 class="text-2xl text-yellow-300"><b>3. Llaves</b></h2>
                        <p class="text-gray-400 mt-2">Garantizando la integridad y las relaciones.</p>
                    </a>
                    <a href="indices.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-purple-500">
                        <h2 class="text-2xl text-purple-300"><b>4. √çndices</b></h2>
                        <p class="text-gray-400 mt-2">El secreto para que tus consultas vuelen.</p>
                    </a>
                    <a href="diagramas_erd.html" class="card bg-gray-700 p-6 rounded-lg border border-transparent hover:border-pink-500">
                        <h2 class="text-2xl text-pink-300"><b>5. Diagramas ERD</b></h2>
                        <p class="text-gray-400 mt-2">Visualizando la estructura de datos.</p>
                    </a>
                </div>
            </div>
        </section>
        <!-- Slide 6: Transici√≥n al Taller -->
        <section>
            <div class="bg-gray-800 p-12 rounded-2xl shadow-xl text-center border-t-8 border-cyan-500">
                <h2 class="text-4xl font-bold text-white mb-6">¬°Ahora, a la Pr√°ctica!</h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">Ahora que entendemos el mapa completo y la importancia de cada pieza, vamos a empezar nuestro primer taller.</p>
                <p class="text-xl text-gray-200 font-bold bg-cyan-900/50 p-4 rounded-lg mt-6 border border-cyan-700">Tomaremos un esquema de base de datos con problemas de dise√±o y, como arquitectos, propondremos mejoras aplicando los conceptos de Normalizaci√≥n y Llaves.</p>
            </div>
        </section>
    </main>
    
    <div class="fixed bottom-8 flex space-x-4 z-10">
        <button id="prevBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">Anterior</button>
        <button id="nextBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">Siguiente</button>
    </div>
    
    <script>
        
        function drawForceDirectedGraph(containerId, nodes, links, width = 600, height = 400) {
            d3.select(containerId).select("svg").remove();
            const svg = d3.select(containerId).append("svg").attr("width", "100%").attr("height", "100%").attr("viewBox", `0 0 ${width} ${height}`);
            const simulation = d3.forceSimulation(nodes)
                .force("link", d3.forceLink(links).id(d => d.id).distance(d => d.distance || 150).strength(0.5))
                .force("charge", d3.forceManyBody().strength(-400))
                .force("center", d3.forceCenter(width / 2, height / 2));

            const link = svg.append("g").selectAll("line").data(links).join("line")
                .attr("stroke", d => d.color || "#9ca3af").attr("stroke-opacity", 0.8).attr("stroke-width", 3)
                .attr("marker-end", "url(#arrow)");

            const node = svg.append("g").selectAll("g").data(nodes).join("g");
            node.append("rect").attr("width", d => d.width || 140).attr("height", d => d.height || 60)
                .attr("x", d => -(d.width || 140) / 2).attr("y", d => -(d.height || 60) / 2)
                .attr("rx", 10).attr("ry", 10)
                .attr("fill", d => d.color || "#1e293b").attr("stroke", d => d.stroke || "#38bdf8").attr("stroke-width", 3);
            
            node.append("text").attr("text-anchor", "middle").attr("dy", "0.3em")
                .attr("fill", "white").style("font-size", "12px").style("font-weight", "bold").selectAll("tspan")
                .data(d => d.id.split('\n')).join("tspan")
                .attr("x", 0).attr("dy", (d, i) => i === 0 ? 0 : "1.2em").text(d => d);
            
            svg.append('defs').append('marker').attr('id', 'arrow').attr('viewBox', '0 -5 10 10').attr('refX', 20).attr('refY', 0).attr('markerWidth', 6).attr('markerHeight', 6).attr('orient', 'auto-start-reverse').append('path').attr('d', 'M0,-5L10,0L0,5').attr('fill', '#9ca3af');

            simulation.on("tick", () => {
                link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y);
                node.attr("transform", d => `translate(${d.x},${d.y})`);
            });
        }

        const continuumNodes = [
            { id: "Problema de\nNegocio", color: "#f43f5e" },
            { id: "Modelo Conceptual\n(ERD)", color: "#ec4899" },
            { id: "Modelo L√≥gico\n(Normalizaci√≥n, Llaves)", color: "#d946ef" },
            { id: "Decisi√≥n\nArquitect√≥nica", color: "#8b5cf6" },
            { id: "Modelo F√≠sico\n(Tablas, √çndices)", color: "#6366f1" }
        ];
        const continuumLinks = [
            { source: "Problema de\nNegocio", target: "Modelo Conceptual\n(ERD)" },
            { source: "Modelo Conceptual\n(ERD)", target: "Modelo L√≥gico\n(Normalizaci√≥n, Llaves)" },
            { source: "Modelo L√≥gico\n(Normalizaci√≥n, Llaves)", target: "Decisi√≥n\nArquitect√≥nica" },
            { source: "Decisi√≥n\nArquitect√≥nica", target: "Modelo F√≠sico\n(Tablas, √çndices)" }
        ];

        const archNodes = [
            { id: "Problema", radius: 50, color: "#f43f5e", stroke: "#be123c" },
            { id: "BI R√°pido", color: "#a855f7" },
            { id: "Integraci√≥n √Ågil", color: "#a855f7" },
            { id: "Big Data / IoT", color: "#a855f7" },
            { id: "Escala Organizacional", color: "#a855f7" },
            { id: "Kimball", color: "#22c55e" },
            { id: "Data Vault", color: "#22c55e" },
            { id: "Lakehouse / NoSQL", color: "#22c55e" },
            { id: "Data Mesh", color: "#22c55e" }
        ];
        const archLinks = [
            { source: "Problema", target: "BI R√°pido", color: 'transparent' },
            { source: "Problema", target: "Integraci√≥n √Ågil", color: 'transparent' },
            { source: "Problema", target: "Big Data / IoT", color: 'transparent' },
            { source: "Problema", target: "Escala Organizacional", color: 'transparent' },
            { source: "BI R√°pido", target: "Kimball" },
            { source: "Integraci√≥n √Ågil", target: "Data Vault" },
            { source: "Big Data / IoT", target: "Lakehouse / NoSQL" },
            { source: "Escala Organizacional", target: "Data Mesh" }
        ];

        const slides = document.querySelectorAll('main > section'); 
        let currentSlide = 0;
        const prevBtn = document.getElementById('prevBtn'); 
        const nextBtn = document.getElementById('nextBtn');
        
        function drawVisibleDiagram() {
            const activeSlide = slides[currentSlide];
            if (!activeSlide) return;
            const container = activeSlide.querySelector('.diagram-container');
            if (!container) return;
            d3.select(container).select("svg").remove();
            const containerId = `#${container.id}`;

            switch(container.id) {
                case 'diagram-continuum': drawForceDirectedGraph(containerId, continuumNodes, continuumLinks, 600, 400); break;
                case 'diagram-architectures': drawForceDirectedGraph(containerId, archNodes, archLinks, 600, 400); break;
            }
        }

        function showSlide(index) { 
            slides.forEach((slide, i) => slide.classList.toggle('active', i === index)); 
            prevBtn.disabled = index === 0;
            prevBtn.classList.toggle('opacity-50', index === 0);
            nextBtn.disabled = index === slides.length - 1;
            nextBtn.classList.toggle('opacity-50', index === slides.length - 1);
            drawVisibleDiagram();
        }
        
        prevBtn.addEventListener('click', () => { if (currentSlide > 0) { currentSlide--; showSlide(currentSlide); } });
        nextBtn.addEventListener('click', () => { if (currentSlide < slides.length - 1) { currentSlide++; showSlide(currentSlide); } });
        document.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight') nextBtn.click(); else if (e.key === 'ArrowLeft') prevBtn.click(); });
        
        showSlide(currentSlide);
    </script>
</body>
</html>